{% doc %}
  @prompt
    Create a full-width split hero section (50/50 layout) with:
    
    Left side (text block, vertically centered)
    
    Large luxury serif headline (centered):
    CLOSING THIS <span id="ny-weekday">Wednesday</span>!
    
    Directly below it, a date line (centered) in MM/DD/YYYY format:
    <span id="ny-date">01/28/2026</span>
    
    Small uppercase subheading under date:
    EVERYTHING IS FREE FINAL CHANCE
    
    Then a centered paragraph block (max width ~420px), same copy style as image.
    
    Right side (image block)
    
    Large image (image picker) filling the right 50%
    
    No text overlay
    
    Maintain aspect ratio, cover feel
    
    Desktop: 2 columns (text left, image right)
    
    Mobile: stacked (text first, image below)
    
    Dynamic Date Requirements (must be exact)
    
    The weekday (“Wednesday”) must be fully dynamic and change with the calendar day.
    
    The date must be fully dynamic and update daily.
    
    Both must be calculated using America/New_York timezone (US New York), NOT the store timezone.
    
    Implement this using JavaScript (must not rely on Liquid timezone):
    
    Use Intl.DateTimeFormat with timeZone: "America/New_York"
    
    Weekday format: full weekday name (e.g., Monday, Tuesday)
    
    Date format: MM/DD/YYYY
    
    The JS should populate:
    
    #ny-weekday
    
    #ny-date
    
    The displayed values must always reflect “today” in New York time on every page load.
    
    Styling (match the screenshot)
    
    White background
    
    Lots of whitespace (top/bottom padding ~60px)
    
    Headline large (~48–60px desktop), elegant serif
    
    Date slightly smaller than headline, centered
    
    Subheading small uppercase with letter spacing
    
    Body text light weight, centered, clean and minimal
    
    Max width ~1200px overall
    
    Section settings
    
    Image picker (right image)
    
    Editable subheading + paragraph text
    
    Optional button toggle (off by default)
    
    Name the section: “Closing Announcement Split Hero (NY Dynamic Date)”
{% enddoc %}
{% assign ai_gen_id = block.id | replace: '_', '' | downcase %}

{% style %}
  .ai-closing-hero-{{ ai_gen_id }} {
    display: block;
    width: 100%;
    background-color: {{ block.settings.background_color }};
    padding: {{ block.settings.section_padding_desktop }}px 0;
  }

  .ai-closing-hero-container-{{ ai_gen_id }} {
    max-width: {{ block.settings.max_width }}px;
    margin: 0 auto;
    padding: 0 20px;
  }

  .ai-closing-hero-grid-{{ ai_gen_id }} {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 40px;
    align-items: center;
  }

  .ai-closing-hero-text-{{ ai_gen_id }} {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    text-align: center;
    padding: 40px 20px;
  }

  .ai-closing-hero-headline-{{ ai_gen_id }} {
    font-family: {{ block.settings.headline_font.family }}, {{ block.settings.headline_font.fallback_families }};
    font-weight: {{ block.settings.headline_font.weight }};
    font-style: {{ block.settings.headline_font.style }};
    font-size: {{ block.settings.headline_size_desktop }}px;
    line-height: 1.1;
    color: {{ block.settings.headline_color }};
    margin: 0 0 16px 0;
    letter-spacing: -0.02em;
  }

  .ai-closing-hero-date-{{ ai_gen_id }} {
    font-family: {{ block.settings.headline_font.family }}, {{ block.settings.headline_font.fallback_families }};
    font-weight: {{ block.settings.headline_font.weight }};
    font-style: {{ block.settings.headline_font.style }};
    font-size: {{ block.settings.date_size_desktop }}px;
    line-height: 1.2;
    color: {{ block.settings.date_color }};
    margin: 0 0 24px 0;
    letter-spacing: -0.01em;
  }

  .ai-closing-hero-subheading-{{ ai_gen_id }} {
    font-size: {{ block.settings.subheading_size }}px;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.15em;
    color: {{ block.settings.subheading_color }};
    margin: 0 0 32px 0;
  }

  .ai-closing-hero-paragraph-{{ ai_gen_id }} {
    max-width: 420px;
    font-size: {{ block.settings.paragraph_size }}px;
    line-height: 1.6;
    color: {{ block.settings.paragraph_color }};
    margin: 0 0 32px 0;
  }

  .ai-closing-hero-button-{{ ai_gen_id }} {
    display: inline-block;
    padding: 16px 40px;
    background-color: {{ block.settings.button_bg_color }};
    color: {{ block.settings.button_text_color }};
    text-decoration: none;
    font-size: {{ block.settings.button_text_size }}px;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.1em;
    border-radius: {{ block.settings.button_border_radius }}px;
    transition: all 0.3s ease;
  }

  .ai-closing-hero-button-{{ ai_gen_id }}:hover {
    background-color: {{ block.settings.button_hover_bg_color }};
    color: {{ block.settings.button_hover_text_color }};
  }

  .ai-closing-hero-image-{{ ai_gen_id }} {
    position: relative;
    width: 100%;
    height: 100%;
    min-height: 500px;
  }

  .ai-closing-hero-image-{{ ai_gen_id }} img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    display: block;
  }

  .ai-closing-hero-image-placeholder-{{ ai_gen_id }} {
    width: 100%;
    height: 100%;
    min-height: 500px;
    background-color: #f4f4f4;
    display: flex;
    align-items: center;
    justify-content: center;
    position: relative;
  }

  .ai-closing-hero-image-placeholder-{{ ai_gen_id }} svg {
    width: 100%;
    height: 100%;
    max-width: 400px;
    max-height: 400px;
  }

  .ai-closing-hero-empty-state-{{ ai_gen_id }} {
    position: absolute;
    bottom: 40px;
    left: 50%;
    transform: translateX(-50%);
    padding: 12px 24px;
    font-size: 14px;
    color: #666;
    text-align: center;
    pointer-events: none;
  }

  @media screen and (max-width: 989px) {
    .ai-closing-hero-{{ ai_gen_id }} {
      padding: {{ block.settings.section_padding_mobile }}px 0;
    }

    .ai-closing-hero-grid-{{ ai_gen_id }} {
      grid-template-columns: 1fr;
      gap: 0;
    }

    .ai-closing-hero-headline-{{ ai_gen_id }} {
      font-size: {{ block.settings.headline_size_mobile }}px;
    }

    .ai-closing-hero-date-{{ ai_gen_id }} {
      font-size: {{ block.settings.date_size_mobile }}px;
    }

    .ai-closing-hero-image-{{ ai_gen_id }} {
      min-height: 400px;
    }

    .ai-closing-hero-image-placeholder-{{ ai_gen_id }} {
      min-height: 400px;
    }
  }

  @media screen and (max-width: 749px) {
    .ai-closing-hero-text-{{ ai_gen_id }} {
      padding: 30px 15px;
    }

    .ai-closing-hero-image-{{ ai_gen_id }} {
      min-height: 350px;
    }

    .ai-closing-hero-image-placeholder-{{ ai_gen_id }} {
      min-height: 350px;
    }
  }
{% endstyle %}

<closing-hero-{{ ai_gen_id }} class="ai-closing-hero-{{ ai_gen_id }}" {{ block.shopify_attributes }}>
  <div class="ai-closing-hero-container-{{ ai_gen_id }}">
    <div class="ai-closing-hero-grid-{{ ai_gen_id }}">
      <div class="ai-closing-hero-text-{{ ai_gen_id }}">
        <h1 class="ai-closing-hero-headline-{{ ai_gen_id }}">
          CLOSING THIS <span id="ny-weekday-{{ ai_gen_id }}">Wednesday</span>!
        </h1>
        
        <div class="ai-closing-hero-date-{{ ai_gen_id }}">
          <span id="ny-date-{{ ai_gen_id }}">01/28/2026</span>
        </div>

        <div class="ai-closing-hero-subheading-{{ ai_gen_id }}">
          {{ block.settings.subheading }}
        </div>

        {% if block.settings.paragraph != blank %}
          <div class="ai-closing-hero-paragraph-{{ ai_gen_id }}">
            {{ block.settings.paragraph }}
          </div>
        {% endif %}

        {% if block.settings.show_button and block.settings.button_text != blank %}
          <a href="{{ block.settings.button_link }}" class="ai-closing-hero-button-{{ ai_gen_id }}">
            {{ block.settings.button_text }}
          </a>
        {% endif %}
      </div>

      <div class="ai-closing-hero-image-{{ ai_gen_id }}">
        {% if block.settings.image %}
          <img
            src="{{ block.settings.image | image_url: width: 1200 }}"
            alt="{{ block.settings.image.alt | escape }}"
            loading="lazy"
            width="{{ block.settings.image.width }}"
            height="{{ block.settings.image.height }}"
          >
        {% else %}
          <div class="ai-closing-hero-image-placeholder-{{ ai_gen_id }}">
            {{ 'hero-apparel-1' | placeholder_svg_tag }}
            <div class="ai-closing-hero-empty-state-{{ ai_gen_id }}">
              Next, add an image
            </div>
          </div>
        {% endif %}
      </div>
    </div>
  </div>
</closing-hero-{{ ai_gen_id }}>

<script>
  (function() {
    class ClosingHero{{ ai_gen_id }} extends HTMLElement {
      constructor() {
        super();
      }

      connectedCallback() {
        this.updateNYDateTime();
      }

      updateNYDateTime() {
        const weekdayElement = document.getElementById('ny-weekday-{{ ai_gen_id }}');
        const dateElement = document.getElementById('ny-date-{{ ai_gen_id }}');

        if (!weekdayElement || !dateElement) return;

        const nyTimeZone = 'America/New_York';
        const now = new Date();

        const weekdayFormatter = new Intl.DateTimeFormat('en-US', {
          timeZone: nyTimeZone,
          weekday: 'long'
        });

        const dateFormatter = new Intl.DateTimeFormat('en-US', {
          timeZone: nyTimeZone,
          month: '2-digit',
          day: '2-digit',
          year: 'numeric'
        });

        const weekday = weekdayFormatter.format(now);
        const dateParts = dateFormatter.formatToParts(now);
        
        const month = dateParts.find(part => part.type === 'month').value;
        const day = dateParts.find(part => part.type === 'day').value;
        const year = dateParts.find(part => part.type === 'year').value;
        
        const formattedDate = `${month}/${day}/${year}`;

        weekdayElement.textContent = weekday;
        dateElement.textContent = formattedDate;
      }
    }

    customElements.define('closing-hero-{{ ai_gen_id }}', ClosingHero{{ ai_gen_id }});
  })();
</script>

{% schema %}
{
  "name": "Closing announcement",
  "tag": null,
  "settings": [
    {
      "type": "header",
      "content": "Layout"
    },
    {
      "type": "range",
      "id": "max_width",
      "min": 1000,
      "max": 1600,
      "step": 50,
      "unit": "px",
      "label": "Maximum width",
      "default": 1200
    },
    {
      "type": "range",
      "id": "section_padding_desktop",
      "min": 0,
      "max": 120,
      "step": 10,
      "unit": "px",
      "label": "Desktop padding",
      "default": 60
    },
    {
      "type": "range",
      "id": "section_padding_mobile",
      "min": 0,
      "max": 80,
      "step": 10,
      "unit": "px",
      "label": "Mobile padding",
      "default": 40
    },
    {
      "type": "color",
      "id": "background_color",
      "label": "Background color",
      "default": "#ffffff"
    },
    {
      "type": "header",
      "content": "Image"
    },
    {
      "type": "image_picker",
      "id": "image",
      "label": "Image"
    },
    {
      "type": "header",
      "content": "Headline"
    },
    {
      "type": "font_picker",
      "id": "headline_font",
      "label": "Font",
      "default": "serif"
    },
    {
      "type": "range",
      "id": "headline_size_desktop",
      "min": 30,
      "max": 80,
      "step": 2,
      "unit": "px",
      "label": "Desktop size",
      "default": 56
    },
    {
      "type": "range",
      "id": "headline_size_mobile",
      "min": 24,
      "max": 60,
      "step": 2,
      "unit": "px",
      "label": "Mobile size",
      "default": 36
    },
    {
      "type": "color",
      "id": "headline_color",
      "label": "Color",
      "default": "#000000"
    },
    {
      "type": "header",
      "content": "Date"
    },
    {
      "type": "range",
      "id": "date_size_desktop",
      "min": 24,
      "max": 60,
      "step": 2,
      "unit": "px",
      "label": "Desktop size",
      "default": 44
    },
    {
      "type": "range",
      "id": "date_size_mobile",
      "min": 20,
      "max": 48,
      "step": 2,
      "unit": "px",
      "label": "Mobile size",
      "default": 30
    },
    {
      "type": "color",
      "id": "date_color",
      "label": "Color",
      "default": "#000000"
    },
    {
      "type": "header",
      "content": "Subheading"
    },
    {
      "type": "text",
      "id": "subheading",
      "label": "Text",
      "default": "EVERYTHING IS FREE FINAL CHANCE"
    },
    {
      "type": "range",
      "id": "subheading_size",
      "min": 10,
      "max": 20,
      "step": 1,
      "unit": "px",
      "label": "Size",
      "default": 12
    },
    {
      "type": "color",
      "id": "subheading_color",
      "label": "Color",
      "default": "#000000"
    },
    {
      "type": "header",
      "content": "Paragraph"
    },
    {
      "type": "richtext",
      "id": "paragraph",
      "label": "Text",
      "default": "<p>This is your final opportunity to take advantage of our incredible offer. Don't miss out on this limited-time chance to get everything you need.</p>"
    },
    {
      "type": "range",
      "id": "paragraph_size",
      "min": 14,
      "max": 24,
      "step": 1,
      "unit": "px",
      "label": "Size",
      "default": 16
    },
    {
      "type": "color",
      "id": "paragraph_color",
      "label": "Color",
      "default": "#333333"
    },
    {
      "type": "header",
      "content": "Button"
    },
    {
      "type": "checkbox",
      "id": "show_button",
      "label": "Show button",
      "default": false
    },
    {
      "type": "text",
      "id": "button_text",
      "label": "Button text",
      "default": "Shop now"
    },
    {
      "type": "url",
      "id": "button_link",
      "label": "Button link"
    },
    {
      "type": "range",
      "id": "button_text_size",
      "min": 12,
      "max": 20,
      "step": 1,
      "unit": "px",
      "label": "Text size",
      "default": 14
    },
    {
      "type": "range",
      "id": "button_border_radius",
      "min": 0,
      "max": 40,
      "step": 2,
      "unit": "px",
      "label": "Border radius",
      "default": 4
    },
    {
      "type": "color",
      "id": "button_bg_color",
      "label": "Background color",
      "default": "#000000"
    },
    {
      "type": "color",
      "id": "button_text_color",
      "label": "Text color",
      "default": "#ffffff"
    },
    {
      "type": "color",
      "id": "button_hover_bg_color",
      "label": "Hover background color",
      "default": "#333333"
    },
    {
      "type": "color",
      "id": "button_hover_text_color",
      "label": "Hover text color",
      "default": "#ffffff"
    }
  ],
  "presets": [
    {
      "name": "Closing announcement"
    }
  ]
}
{% endschema %}
