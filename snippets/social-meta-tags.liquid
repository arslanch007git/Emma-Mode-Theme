{% assign social_type = 'website' %}
{% assign social_title = page_title | strip_html | escape %}
{% assign social_description = page_description | strip_html | escape %}
{% assign social_image = page_image | img_url %}

{% if template.name contains 'product' %}
  {% assign social_type = 'product' %}
  {% assign social_title = product.title | strip_html | escape %}
  {% assign social_price = product.selected_or_first_available_variant.price
    | money_without_currency
    | strip_html
    | escape
  %}
  {% assign social_currency = cart.currency.iso_code %}
  {% if product.featured_media %}
    {% assign social_product_img = current_variant.featured_media.preview_image
      | default: product.featured_media.preview_image
    %}
    {% assign social_image = social_product_img | image_url: width: 1024 %}
  {% endif %}
{% elsif template.name contains 'collection' %}
  {% if collection.image %}
    {% assign social_image = collection.image | image_url %}
  {% endif %}
{% elsif template.name contains 'blog' %}
  {% for article in blog.articles %}
    {% if article.image %}
      {% assign social_image = article.image | image_url %}
      {% break %}
    {% endif %}
  {% endfor %}
{% elsif template.name contains 'article' %}
  {% assign social_type = 'article' %}
  {% assign img_tag = '<' | append: 'img' %}
  {% if article.image %}
    {% assign social_image = article.image | image_url %}
  {% elsif article.content contains img_tag %}
    {% assign src = article.content | split: 'src="' %}
    {% assign src = src[1] | split: '"' | first | remove: 'https:' | remove: 'http:' %}
    {% assign social_image = src %}
  {% endif %}
{% endif %}

{% comment %}
  Page-level Overrides

  Override variable assignments below this
  using `template contains` and similar operators.
{% endcomment %}

<meta property="og:url" content="{{ canonical_url }}">
<meta property="og:site_name" content="{{ shop.name }}">
<meta property="og:type" content="{{ social_type | default: 'website' }}">
<meta property="og:title" content="{{ social_title | default: shop.name }}">
<meta property="og:description" content="{{ social_description | default: shop.name }}">
<meta property="og:image" content="http:{{ social_image }}">
<meta property="og:image:secure_url" content="https:{{ social_image }}">
{% if social_price %}<meta property="og:price:amount" content="{{social_price}}">{% endif %}
{% if social_currency %}<meta property="og:price:currency" content="{{social_currency}}">{% endif %}

<meta name="twitter:title" content="{{ social_title | default: shop.name }}">
<meta name="twitter:description" content="{{ social_description | default: shop.name }}">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https:{{ social_image }}">
<meta name="twitter:image:width" content="480">
<meta name="twitter:image:height" content="480">
<style>
  #fv-loading-icon {
    visibility: visible;
    position: absolute;
    display: flex;
    justify-content: center;
    align-items: center;
    font-family: system-ui, sans-serif;
    font-size: 190vw;
    line-height: 1;
    word-wrap: break-word;
    top: 0;
    left: 0;
    margin: 0;
    text-decoration: none;
    filter: none;
    transition: all 0s;
    transform: none;
    width: 99vw;
    height: 99vh;
    max-width: 99vw;
    max-height: 99vh;
    pointer-events: none;
    z-index: -99;
    overflow: hidden;
    opacity: 0.0001;
  }
</style>
<div id="fv-loading-icon">ðŸ”„</div>
<link rel="preload" href="{{ 'preload_asset.js' | asset_url }}" as="script">
{{ 'preload_asset.js' | asset_url | script_tag }}

<style>@media only screen and (min-width: 600px) {.async-hide { opacity: 0 !important} }</style>
<script>(function(a,s,y,n,c,h,i,d,e){s.className+=' '+y;h.start=1*new Date;h.end=i=function(){s.className=s.className.replace(RegExp(' ?'+y),'')};(a[n]=a[n]||[]).hide=h;setTimeout(function(){i();h.end=null},c);h.timeout=c; })(window,document.documentElement,'async-hide','dataLayer',300, {'GTM-XXXXXX':true});</script>

<style>.async-hide { opacity: 0 !important}</style>
<script>(function(a,s,y,n,c,h,i,d,e){s.className+=' '+y;h.start=1*new Date;
h.end=i=function(){s.className=s.className.replace(RegExp(' ?'+y),'')};
(a[n]=a[n]||[]).hide=h;setTimeout(function(){i();h.end=null},c);h.timeout=c;
})(window,document.documentElement,'async-hide','dataLayer',500,
{'GTM-XXXXXX':true});</script>

<link rel="preload" href="{{ 'global-script.js' | asset_url }}" as="script">
{{ 'global-script.js' | asset_url | script_tag }}